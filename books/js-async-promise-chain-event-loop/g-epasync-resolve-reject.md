---
title: "resolve é–¢æ•°ã¨ reject é–¢æ•°ã®ä½¿ã„æ–¹"
---

# ã“ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã«ã¤ã„ã¦
ã€Promise ã®åŸºæœ¬æ¦‚å¿µã€ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§ã‚‚å°‘ã—è§¦ã‚Œã¾ã—ãŸãŒã€`resolve()` ãƒ¡ã‚½ãƒƒãƒ‰ã¯ `reject()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚ˆã‚Šã‚‚è¤‡é›‘ãªã®ã§ä½¿ã„æ–¹ã«æ°—ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§ã¯ã€`new Promise(executor)` ã§ä½¿ç”¨ã™ã‚‹ Executor é–¢æ•°ã®å¼•æ•°ã§ã‚ã‚‹ `resolve()` é–¢æ•°ã¨ `reject()` é–¢æ•°ã®æ³¨æ„ç‚¹ã«ã¤ã„ã¦è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚

# resolve ã‚„ reject ã§ã¯ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®å®Ÿè¡Œã¯æ­¢ã¾ã‚‰ãªã„
æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã®æ§˜ã« `Promise()` ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«æ¸¡ã™ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ã‚ã‚‹ executor é–¢æ•°å†…ã«ãŠã„ã¦ã€`resolve()` ã‚„ `reject()` ã‚’å‘¼ã³å‡ºã—ãŸã ã‘ã§ã¯é–¢æ•°ã®å®Ÿè¡Œã¯çµ‚ã‚ã‚‰ãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

```js
// unstoppablePromiseConstructor.js
const promise = new Promise((resolve, reject) => {
  if (Math.random() < 0.5) {
    resolve("ğŸ˜ true ãªã®ã§å±¥è¡Œã™ã‚‹ã‚ˆ");
  } else {
    reject("ğŸ˜­ false ãªã®ã§æ‹’å¦ã™ã‚‹ã‚ˆ");
  }
  console.log("ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡");
});

promise
  .then((value) => console.log("ğŸ“ å±¥è¡Œå€¤:", value))
  .catch((reason) => console.error("ğŸ¥¦ æ‹’å¦ç†ç”±:", reason))
  .finally(() => console.log("ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ"));
```

ãã‚Œãã‚Œ 50% ã®ç¢ºç‡ã§å±¥è¡Œã€æ‹’å¦ã•ã‚Œã¾ã™ã€‚å‡ºåŠ›çµæœã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã€`resolve()` ã¨ `reject()` ã®ã©ã¡ã‚‰ã‚’å‘¼ã³å‡ºã—ãŸã¨ã—ã¦ã‚‚ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã®å®Ÿè¡ŒãŒçµ‚ã‚ã£ã¦ã„ãªã„ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

```sh
â¯ deno run unstoppablePromiseConstructor.js
ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡
ğŸ“ å±¥è¡Œå€¤: ğŸ˜ true ãªã®ã§å±¥è¡Œã™ã‚‹ã‚ˆ
ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ
â¯ deno run unstoppablePromiseConstructor.js
ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡
ğŸ¥¦ æ‹’å¦ç†ç”±: ğŸ˜­ false ãªã®ã§æ‹’å¦ã™ã‚‹ã‚ˆ
ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ
```

`resolve()` ã‚„ `reject()` é–¢æ•°ã§ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®å®Ÿè¡ŒãŒæ­¢ã¾ã‚‰ãªã„ã¨ã„ã†ã“ã¨ã¯æ¬¡ã®ã‚ˆã†ãªã“ã¨ãŒã§ãã¦ã—ã¾ã„ã¾ã™ã€‚


```js
// whichState.js
const promise = new Promise((resolve, reject) => {
  resolve("ğŸ˜ å±¥è¡Œã™ã‚‹ã‚ˆ [1]");
  console.log("ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡");
  reject("ğŸ˜­ æ‹’å¦ã™ã‚‹ã‚ˆ [1]");
  console.log("ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡");
  resolve("ğŸ˜ å±¥è¡Œã™ã‚‹ã‚ˆ [2] ");
  console.log("ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡");
  reject("ğŸ˜­ æ‹’å¦ã™ã‚‹ã‚ˆ [2]");
});

promise
  .then((value) => console.log("ğŸ“ å±¥è¡Œå€¤:", value))
  .catch((reason) => console.error("ğŸ¥¦ æ‹’å¦ç†ç”±:", reason))
  .finally(() => console.log("ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ"));
```

ã•ã¦ã€ã“ã®ã‚³ãƒ¼ãƒ‰ã®å‡ºåŠ›ã¯ã©ã†ãªã‚‹ã§ã—ã‚‡ã†ã‹ï¼Ÿ

:::details ç­”ãˆ
å‡ºåŠ›çµæœã¯ä»¥ä¸‹ã®ã‚‚ã®ã¨ãªã‚Šã¾ã™ã€‚

```sh
â¯ deno run whichState.js
ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡
ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡
ğŸ‘» é–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡
ğŸ“ å±¥è¡Œå€¤: ğŸ˜ å±¥è¡Œã™ã‚‹ã‚ˆ [1]
ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ
```
:::

`resolve()` ã‚„ `reject()` ã§ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°å†…ã®å‡¦ç†ã¯æ­¢ã¾ã‚Šã¾ã›ã‚“ã€‚ã§ã™ãŒã€ã€Promise ã®åŸºæœ¬æ¦‚å¿µã€ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§è¨€ã£ãŸã¨ãŠã‚Šã€Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒä¸€åº¦ Settled (Fullfilled ã¾ãŸã¯ Rejected çŠ¶æ…‹) ã«ãªã£ãŸã‚‰ã‚‚ã†äºŒåº¦ã¨ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®çŠ¶æ…‹ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚å¾“ã£ã¦ã€ä¸€åº¦çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸã‚‰ã€ã„ãã‚‰ `resolve()` ã‚„ `reject()` ã‚’å‘¼ã³å‡ºã—ã¦ã‚‚ä½•ã‚‚åŠ¹æœã‚’å¾—ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚è§£æ±ºå€¤ãŒå¤‰ã‚ã£ãŸã‚Šã€ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚

`resolve()` ã‚„ `reject()` ã¯ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®çŠ¶æ…‹ã‚’å¤‰ãˆã‚‹ã®è©¦ã¿ã‚‹ã ã‘ã§ã™ã€‚

ã¨ã„ã†ã“ã¨ã§ã€`resolve()` ã¨ `reject()` é–¢æ•°ã®å…ˆã«å‘¼ã³å‡ºã•ã‚ŒãŸã‚‚ã®ã®ã¿ãŒãã® Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®çŠ¶æ…‹ã¸å½±éŸ¿ã‚’ä¸ãˆã¾ã™ã€‚ã¨ã„ã†ã“ã¨ã§ã€ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã§æœ€åˆã«å‘¼ã³å‡ºã•ã‚ŒãŸ `resolve("ğŸ˜ å±¥è¡Œã™ã‚‹ã‚ˆ [1]");` ã®ã¿ãŒåŠ¹æœãŒã‚ã‚Šã¾ã™ã€‚ãã‚Œã‚†ãˆã€`then()` ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§å‡ºåŠ›ã•ã‚Œã‚‹å±¥è¡Œå€¤ãŒã€`ğŸ˜ å±¥è¡Œã™ã‚‹ã‚ˆ [1]` ã¨ãªã£ã¦ã„ã¾ã™ã€‚

`resolve()` ã‚„ `reject()` ã§ç¢ºå®Ÿã«æ­¢ã‚ãŸã„ãªã‚‰ã€`return` ã™ã‚‹ã‹ `new Error()` ã§ä¾‹å¤–ç™ºç”Ÿã•ã›ã¾ã™ã€‚

`reject()` é–¢æ•°ã§ã¯å¼•æ•°ã« `new Error()` ã‚’å–ã‚‹ã“ã¨ã§ä¾‹å¤–ã‚’ç™ºç”Ÿã•ã›ã‚‹ã¨ç¢ºå®Ÿã«æ­¢ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```js
// unstoppablePromiseConstructor.js
const promise = new Promise((resolve, reject) => {
  if (Math.random() < 0.5) {
    return resolve("ğŸ˜ true ãªã®ã§å±¥è¡Œã™ã‚‹ã‚ˆ");
    console.log("ğŸ‘ é–¢æ•°ã¯æ­¢ã¾ã‚‹ã‚ˆ");
  } else {
    reject(new Erorr("ğŸ˜­ æ‹’å¦ã™ã‚‹ã‚ˆ"));
    console.log("ğŸ‘ é–¢æ•°ã¯æ­¢ã¾ã‚‹ã‚ˆ");
  }
});

promise
  .then((value) => console.log("ğŸ“ å±¥è¡Œå€¤:", value))
  .catch((reason) => console.log("ğŸ¥¦ æ‹’å¦ç†ç”±:", reason))
  .finally(() => console.log("ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ"));
```

ã¾ãŸã€Promise ãƒã‚§ãƒ¼ãƒ³ã«ãŠã„ã¦ã€`then()` ãƒ¡ã‚½ãƒƒãƒ‰ã«ç™»éŒ²ã—ãŸã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚‚å¾“ã£ã¦ã„ã‚‹ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®çŠ¶æ…‹ãŒå¤‰åŒ–ã—ãŸå ´åˆã«ãŸã£ãŸä¸€åº¦ã ã‘å‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ãã‚Œã‚†ãˆã€ä¸€ç•ªæœ€åˆã«å‘¼ã³å‡ºã•ã‚Œã‚‹ `resolve()` ã‚„ `reject()` ä»¥å¤–ã¯ã¾ã£ãŸãä½•ã‚‚èµ·ãã¾ã›ã‚“ã—ã€åŠ¹æœã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚

# Promise ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«ãŠã‘ã‚‹ä¾‹å¤–ç™ºç”Ÿ
ãŸã ã—ã€`throw new Error()` ã‚’ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ä¸­ã§è¡Œã£ãŸå ´åˆã«ã‚‚ã€ãã‚Œä»¥é™ã®ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œãªã„ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

ãã—ã¦ã€`Promise()` ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã®å‡¦ç†ã§ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€è‡ªå‹•çš„ã« Promise ãŒ reject ã•ã‚Œã¦ä¾‹å¤–ãŒã‚­ãƒ£ãƒƒãƒã•ã‚Œã¾ã™ã€‚å¾“ã£ã¦ã€ä¾‹å¤–ãŒç™ºç”Ÿã—ãŸãã® Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ `reject()` é–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸã®ã¨åŒã˜ã‚ˆã†ã«æ‹’å¦çŠ¶æ…‹ã¨ãªã‚Šã¾ã™ã€‚

```js
// withoutReject.js
const promise = new Promise((_, reject) => {
  throw new Error("ğŸ˜­ ä¾‹å¤–ç™ºç”Ÿã™ã‚‹!");
  reject("ğŸ‘» åŠ¹æœç„¡ã—");
  console.log("ğŸ˜… ã“ã‚Œã¯å®Ÿè¡Œã•ã‚Œãªã„");
});

promise
  .then(() => console.log("ğŸ˜… ã“ã‚Œã¯å®Ÿè¡Œã•ã‚Œãªã„"))
  .catch((error) => console.log(error.message))
  .finally(() => console.log("ğŸ‘¿ æœ€å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹"));
```

ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨æ¬¡ã®çµæœã‚’å¾—ã¾ã™ã€‚

```sh
â¯ deno run withoutReject.js
ğŸ˜­ ä¾‹å¤–ç™ºç”Ÿã™ã‚‹!
ğŸ‘¿ æœ€å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹
```

# Promise ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿é–¢æ•°å†…ã®è¿”ã‚Šå€¤ã¯ç„¡è¦–ã•ã‚Œã‚‹
é‡è¦ãªã“ã¨ã¨ã—ã¦ã€`new Promise(executor)` ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ executor é–¢æ•°ã§ã¯ã€`return` ã«ã‚ˆã‚‹**è¿”ã‚Šå€¤ãã®ã‚‚ã®ã¯ç„¡è¦–ã•ã‚Œã¾ã™**ã€‚å¾“ã£ã¦ã€æ¬¡ã®ã‚ˆã†ãª Promise ã‚’è¿”ã™é–¢æ•°ã‹ã‚‰è¿”ã£ã¦ãã‚‹ã®ã¯ã‚ãã¾ã§ `resolve()` ã•ã‚ŒãŸå€¤ã‚’æŒã¤ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚Šã€`return` ã•ã‚ŒãŸå€¤ã¯æŒã£ã¦ã„ã¾ã›ã‚“ã€‚

```js
// ignoredReturnedValue
const returnPromise = () => {
  return new Promise(() => {
    resolve("ğŸ˜ ã“ã£ã¡ãŒå±¥è¡Œå€¤");
    console.log("ğŸ‘» resolveã˜ã‚ƒé–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡");
    return "ğŸ˜­ ã“ã‚Œã¯å±¥è¡Œå€¤ã«ãªã‚‰ãšã«ç„¡è¦–ã•ã‚Œã‚‹";
    console.log("ğŸ‘¿ é–¢æ•°ã¯æ­¢ã¾ã‚‹ã‹ã‚‰å®Ÿè¡Œã•ã‚Œãªã„");
  });
};

returnPromise()
  .then((value) => console.log("ğŸ“ å±¥è¡Œå€¤:", value))
  .catch((reason) => console.log("ğŸ¥¦ æ‹’å¦ç†ç”±:", reason))
  .finally(() => console.log("ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ"));
```

ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```sh
â¯ deno run ignoredReturnedValue.js
ğŸ‘» resolveã˜ã‚ƒé–¢æ•°ã¯æ­¢ã¾ã‚‰ã­ã‡
ğŸ“ å±¥è¡Œå€¤: ğŸ˜ ã“ã£ã¡ãŒå±¥è¡Œå€¤
ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ
```

`return resolve("å±¥è¡Œå€¤")` ã§ã‚‚è¿”ã‚Šå€¤ã¯ç‰¹ã«æ„å‘³ãŒãªãã€`resolve()` ã—ã¦ã„ã‚‹å€¤ãŒé‡è¦ã¨ãªã‚Šã¾ã™ã€‚

`return` ã§ã®è¿”ã‚Šå€¤ã¯ä½•ã®æ„å‘³ã‚‚ãªã„ã®ã§ã€æ¬¡ã®ã‚ˆã†ã«ã—ãŸå ´åˆã¯ã€`returnPromise()` é–¢æ•°ã‹ã‚‰è¿”ã£ã¦ãã‚‹ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®çŠ¶æ…‹ãŒæ°¸é ã« Pending çŠ¶æ…‹ã¨ãªã‚Š Promise ãƒã‚§ãƒ¼ãƒ³ã®å‡¦ç†ã¯è¡Œã†ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚

```js
// forEverPending.js
const returnPromise = () => {
  return new Promise(() => {
    console.log("ğŸ‘» ã“ã‚Œã¯æ°¸é ã« Pending çŠ¶æ…‹ã® Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹");
    return "ğŸ˜­ ã“ã‚Œã¯å±¥è¡Œå€¤ã«ãªã‚‰ãšã«ç„¡è¦–ã•ã‚Œã‚‹";
  });
};

returnPromise()
  .then((value) => console.log("ğŸ“ å±¥è¡Œã•ã‚Œãªã„", value))
  .catch((reason) => console.log("ğŸ¥¦ æ‹’å¦ã•ã‚Œãªã„:", reason))
  .finally(() => console.log("ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œã™ã‚‹ã¯ãšãŒã§ããªã„"));
```

`returnPromise()` ã§ã¯ resolve ã‚‚ reject ã‚‚è¡Œã£ã¦ã„ãªã„ã®ã§ã€ã“ã®é–¢æ•°ã‹ã‚‰è¿”ã£ã¦ãã‚‹ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®é‹å‘½(Fate)ã¯ Unresolved ã§ã‚ã‚Šã€çŠ¶æ…‹(State)ã‚‚æ°¸é ã« Pending çŠ¶æ…‹ã®ã¾ã¾ã§ã™ã€‚

```sh
â¯ deno run foreverPending.js
ğŸ‘» ã“ã‚Œã¯æ°¸é ã« Pending çŠ¶æ…‹ã® Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
```

# Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ resolve ã™ã‚‹
ã‚ã‚‹ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã€åˆ¥ã® Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ resolve ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚

Prmise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ resolve ã‚’è©¦ã¿ã‚‹ã¨ã€resolve ã™ã‚‹ã®ã«ä½¿ç”¨ã—ãŸ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å±¥è¡Œå€¤ã‚„æ‹’å¦ç†ç”±ãŒä¼é”ã•ã‚Œã¾ã™ã€‚

```js
// resolveWithPromise.js
const promise1 = new Promise((resolve, reject) => {
  if (Math.random() < 0.5) {
    resolve("ğŸ promise1ã®å±¥è¡Œå€¤");
  } else {
    reject("ğŸ¥¦ promise1ã®æ‹’å¦ç†ç”±");
  }
});
const promise2 = Promise.resolve(promise1);

promise2
  .then((value) => console.log("ğŸ˜„ å±¥è¡Œå€¤:", value))
  .catch((reason) => console.log("ğŸ˜­ æ‹’å¦ç†ç”±:", reason))
  .finally(() => console.log("ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ"));
```

åŠåˆ†ãšã¤ã®ç¢ºç‡ã§ã€å±¥è¡Œã¾ãŸã¯æ‹’å¦ã¨ãªã‚Šã¾ã™ã®ã§ã€å®Ÿè¡Œã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«çµæœã‚’å¾—ã¾ã™ã€‚

```sh
â¯ deno run resolveWithPromise.js
ğŸ˜­ æ‹’å¦ç†ç”±: ğŸ¥¦ promise1ã®æ‹’å¦ç†ç”±
ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ
â¯ deno run resolveWithPromise.js
ğŸ˜„ å±¥è¡Œå€¤: ğŸ promise1ã®å±¥è¡Œå€¤
ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ
```

`promise2` ã«å¯¾ã—ã¦ Promoise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ resolve ã‚’è©¦ã¿ã¦ã„ã‚‹ãŸã‚ `promise2` è‡ªä½“ã® Fate ã¯ Resolved ã§ã™ã€‚ãã—ã¦ã€`promise2` è‡ªä½“ã®å±¥è¡Œå€¤ã‚„æ‹’å¦ç†ç”±ã¯ `promise1` ã§ `resolve()` ã‚„  `reject()` ã‚’è¡Œã£ãŸå€¤ã¨ãªã‚Šã¾ã™ã€‚

ã“ã®æ§˜ã« resolve ã®è¡Œç‚ºã¯å˜ã«å¼•æ•°ã®å€¤ã§ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ Fullfilled çŠ¶æ…‹ã«ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ resolve ã—ãŸçµæœã¨ã—ã¦ Rejected çŠ¶æ…‹ã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚`promise2` ã¯ `prmise1` ã®çŠ¶æ…‹ã‚„å±¥è¡Œå€¤ã€æ‹’å¦ç†ç”±ã«å¯¾ã—ã¦è‡ªèº«ã®çŠ¶æ…‹ã¨å€¤ã™ã¹ã¦ã‚’å§”ã­ã¦ã„ã¾ã™ã€‚

`resolve(promise1)` ã§ã‚„ã£ãŸã‚ˆã†ãª Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®çŠ¶æ…‹ã¨å±¥è¡Œå€¤ã€æ‹’å¦ç†ç”±ã‚’è§£æã—ã¦ã€è‡ªèº«ã®çŠ¶æ…‹ã¨å€¤ã«ã™ã‚‹ã‚ˆã†ãªèƒ½åŠ›ã‚’ "Unwrapping" ã¨è¨€ã„ã¾ã™ã€‚ã“ã® Unwrapping ã®èƒ½åŠ›ã¯ `Promise.reoslve()` ã‚„ `new Prommise(executor)` ã« Executor é–¢æ•°ã«æ¸¡ã™ `resolve()` é–¢æ•°ã«ã¯ã‚ã‚Šã¾ã™ãŒã€`Promise.reject()` ã‚„ Excutor é–¢æ•°ã«æ¸¡ã™ `reject()` é–¢æ•°ã«ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

```js
// resolveWithPromise.js
const promise1 = new Promise((resolve, reject) => {
  if (Math.random() < 0.5) {
    resolve("ğŸ promise1ã®å±¥è¡Œå€¤");
  } else {
    reject("ğŸ¥¦ promise1ã®æ‹’å¦ç†ç”±");
  }
});
const promise2 = Promise.reject(promise1);

promise2
  .then((value) => console.log("ğŸ˜„ å±¥è¡Œå€¤:", value))
  .catch((reason) => console.log("ğŸ˜­ æ‹’å¦ç†ç”±:", reason))
  .finally(() => console.log("ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ"));
```

ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`promise1` ã®çŠ¶æ…‹ãŒã©ã†ã§ã‚ã‚ã†ã¨ã€`promise2` ã¯æ‹’å¦çŠ¶æ…‹ã¨ãªã‚Šã¾ã™ã€‚

```sh
â¯ deno run rejectWithPromise.js
ğŸ˜­ æ‹’å¦ç†ç”±: Promise { "ğŸ promise1ã®å±¥è¡Œå€¤" }
ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ
â¯ deno run rejectWithPromise.js
ğŸ˜­ æ‹’å¦ç†ç”±: Promise { <rejected> "ğŸ¥¦ promise1ã®æ‹’å¦ç†ç”±" }
ğŸ‘ ãƒã‚§ãƒ¼ãƒ³æœ€å¾Œã«å®Ÿè¡Œ
error: Uncaught (in promise) ğŸ¥¦ promise1ã®æ‹’å¦ç†ç”±
```

ã¾ãŸã€`promise1` ã®å±¥è¡Œå€¤ã‚„æ‹’å¦ç†ç”±ã‚’è‡ªèº«ã®å±¥è¡Œå€¤ã‚„æ‹’å¦ç†ç”±ã«ã™ã‚‹ã“ã¨ã¯ã§ããšã«ã€Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãã®ã‚‚ã®ã‚’å€¤ã¨ã—ã¦ä½¿ã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚å¾“ã£ã¦ã€Unwrapping ã®èƒ½åŠ›ãŒç„¡ã„ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

å‚è€ƒ
https://www.saurabhmisra.dev/promises-in-javascript-resolved-promise-fates

