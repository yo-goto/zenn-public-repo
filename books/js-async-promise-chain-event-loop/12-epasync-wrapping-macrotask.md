---
title: "å¤ã„éåŒæœŸ API ã‚’ Promise ã§ãƒ©ãƒƒãƒ—ã™ã‚‹"
---

# ã“ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã«ã¤ã„ã¦

ã“ã“ã¾ã§ Promise ãƒã‚§ãƒ¼ãƒ³ã§ã®ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ç™ºè¡Œã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†ã‚’è¦‹ã¦ãã¾ã—ãŸã€‚ã€Œå˜ä¸€ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ãŸã‚‰ã€ã™ã¹ã¦ã®ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ã‚’å‡¦ç†ã™ã‚‹ã€ã¨ã„ã†ã®ãŒã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã®é‡å¤§ãƒ«ãƒ¼ãƒ«ã§ã™ã€‚

ã“ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§ã¯ã€ã‚¿ã‚¹ã‚¯ã«ã‚ˆã‚‹éåŒæœŸå‡¦ç†ã¨ã€ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ã‚’ã‹ã¾ã›ã‚‹ã“ã¨ã§é€æ¬¡å‡¦ç†ã‚„ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ã‚„ã‚Šã‚„ã™ãã™ã‚‹ "Promisification" ã¨ã„ã†æ–¹æ³•ã«ã¤ã„ã¦è§£èª¬ã—ã¦ãŠãã¾ã™ã€‚

:::message alert
ã€ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¨ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã€ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§ã‚¿ã‚¹ã‚¯ã¨ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ã®é–¢ä¿‚ã«ã¤ã„ã¦ã¯è©³ã—ãè§£èª¬ã—ãŸã®ã§ã€ã‚¿ã‚¹ã‚¯ã®è©³ç´°ã«ã¤ã„ã¦ã¯ãã¡ã‚‰ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
:::

# ã‚¿ã‚¹ã‚¯ç™ºè¡Œ

ã“ã®æœ¬ã®å†’é ­ã§è¿°ã¹ãŸã‚ˆã†ã« `setTimoue()` é–¢æ•°ã¯ Web API ã®ä¸€éƒ¨ã§ã™ã€‚ã“ã‚Œã‚’ãªã‚‹ã¹ãä½¿ã‚ãšã«æœ€åˆèª¬æ˜ã—ãŸã®ã¯ã€ã“ã®é–¢æ•°ã«ç™»éŒ²ã™ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ãŒã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸ã¨è¿½åŠ ã•ã‚Œã¦ã—ã¾ã†ã‹ã‚‰ã§ã™ã€‚

`setTimout(cb, delay)` ã®å½¢ã§ `cb` ã«ã¯ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã€`delay` ã«ã¯é…å»¶æ™‚é–“ã‚’ãƒŸãƒªç§’ãŒå˜ä½ã§æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãã®æ™‚é–“ãŒçµŒã£ã¦ã‹ã‚‰ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚ã¤ã¾ã‚Šã€ã“ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã¯éåŒæœŸçš„ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

```js
// timeout.js
console.log('ğŸ¦– [1] MAINILNE: Sync process');
setTimeout(() => {
  console.log('â° [5] TIMERS: This line will be printed after 3000ms');
}, 3000); // 3000ãƒŸãƒªç§’å¾Œã«å®Ÿè¡Œã—ãŸã„(3000ãƒŸãƒªç§’å¾Œã«ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸ç™ºè¡Œ)
setTimeout(() => {
  console.log('â° [4] TIMERS: This line will be printed after 2000ms');
}, 2000); // 2000ãƒŸãƒªç§’å¾Œã«å®Ÿè¡Œã—ãŸã„(2000ãƒŸãƒªç§’å¾Œã«ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸ç™ºè¡Œ)
setTimeout(() => {
  console.log('â° [3] TIMERS: This line will be printed after 1000ms');
}, 1000); // 1000ãƒŸãƒªç§’å¾Œã«å®Ÿè¡Œã—ãŸã„(1000ãƒŸãƒªç§’å¾Œã«ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸ç™ºè¡Œ)
console.log('ğŸ¦– [2] MAINILNE: Sync process');
```

å®Ÿè¡Œã™ã‚‹ã¨æ¬¡ã®å‡ºåŠ›ã‚’å¾—ã¾ã™ã€‚

```sh
â¯ deno run timeout.js
ğŸ¦– [1] MAINILNE: Sync process
ğŸ¦– [2] MAINILNE: Sync process
â° [3] TIMERS: This line will be printed after 1000ms
â° [4] TIMERS: This line will be printed after 2000ms
â° [5] TIMERS: This line will be printed after 3000ms
```

Visualizer ã§å¯è¦–åŒ–ã—ã¦ã¿ãŸã®ã§æ¬¡ã®ãƒªãƒ³ã‚¯ã‹ã‚‰ç¢ºèªã—ã¦ãã ã•ã„ã€‚

- [setTimeout.js - JS Visualizer](https://www.jsv9000.app/?code=Ly8gdGltZW91dC5qcwpjb25zb2xlLmxvZygiWzFdIFN5bmMgcHJvY2VzcyIpOwpzZXRUaW1lb3V0KCgpID0%2BIHsKICBjb25zb2xlLmxvZygiWzVdIFRoaXMgbGluZSB3aWxsIGJlIHByaW50ZWQgYWZ0ZXIgMzAwMG1zIik7Cn0sIDMwMDApOwpzZXRUaW1lb3V0KCgpID0%2BIHsKICBjb25zb2xlLmxvZygiWzRdIFRoaXMgbGluZSB3aWxsIGJlIHByaW50ZWQgYWZ0ZXIgMjAwMG1zIik7Cn0sIDIwMDApOwpzZXRUaW1lb3V0KCgpID0%2BIHsKICBjb25zb2xlLmxvZygiWzNdIFRoaXMgbGluZSB3aWxsIGJlIHByaW50ZWQgYWZ0ZXIgMTAwMG1zIik7Cn0sIDEwMDApOwpjb25zb2xlLmxvZygiWzJdIFN5bmMgcHJvY2VzcyIpOwo%3D)
- âš ï¸ æ³¨æ„: JS Visuzlizer ã§ã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯å¯è¦–åŒ–ã•ã‚Œãªã„ã®ã§æœ€åˆã®ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ãƒ»ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦èª¤è§£ã—ãªã„ã‚ˆã†ã«æ³¨æ„ã—ã¦ãã ã•ã„
- âš ï¸ æ³¨æ„: ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸ã®ã‚¿ã‚¹ã‚¯ã‚’å…¥ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«å®Ÿè£…ãƒŸã‚¹ã¨æ€ã‚ã‚Œã‚‹éƒ¨åˆ†ãŒã‚ã‚‹ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„(ã‚¿ã‚¤ãƒãƒ¼ã®æŒ‡å®šæ™‚é–“ãŒçµŒéã—ãŸé †ç•ªã«ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸å…¥ã‚Œã‚‰ã‚Œã‚‹ã¯ãšã®ã¨ã“ã‚ãŒã€ã‚¿ã‚¤ãƒãƒ¼ã®èµ·å‹•é †ç•ªã«ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸ã¨å…¥ã‚Œã‚‰ã‚Œã¦ã—ã¾ã£ã¦ã„ã¾ã™)

ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸ã¨è¿½åŠ ã•ã‚Œã‚‹ã®ãŒåˆ†ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚

# ã‚¿ã‚¹ã‚¯ãƒ™ãƒ¼ã‚¹ã®éåŒæœŸ API ã«ã¤ã„ã¦

MDN ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ä»¥ä¸‹ã®ã“ã¨ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Using_promises#%E5%8F%A4%E3%81%84%E3%82%B3%E3%83%BC%E3%83%AB%E3%83%90%E3%83%83%E3%82%AF_api_%E3%82%92%E3%83%A9%E3%83%83%E3%83%97%E3%81%99%E3%82%8B_promise_%E3%81%AE%E4%BD%9C%E6%88%90

>ç†æƒ³çš„ã«ã¯ã€ã™ã¹ã¦ã®éåŒæœŸé–¢æ•°ã¯ãƒ—ãƒ­ãƒŸã‚¹ã‚’è¿”ã™ã¯ãšã§ã™ãŒã€**æ®‹å¿µãªãŒã‚‰ API ã®ä¸­ã«ã¯ã„ã¾ã ã«å¤ã„ã‚„ã‚Šæ–¹ã§æˆåŠŸ/å¤±æ•—ç”¨ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’æ¸¡ã—ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã‚Šã¾ã™**ã€‚é¡•è‘—ãªä¾‹ã¨ã—ã¦ã¯ `setTimeout()` é–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚**å¤ã„æ§˜å¼ã§ã‚ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¨ãƒ—ãƒ­ãƒŸã‚¹ã®æ··åœ¨ã¯å•é¡Œã‚’å¼•ãèµ·ã“ã—ã¾ã™**ã€‚ã¨ã„ã†ã®ã¯ã€`saySomething()` ãŒå¤±æ•—ã—ãŸã‚Šãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¨ãƒ©ãƒ¼ã‚’å«ã‚“ã§ã„ãŸå ´åˆã«ã€ãã®ã‚¨ãƒ©ãƒ¼ã‚’ã¨ã‚‰ãˆã‚‰ã‚Œãªã„ã‹ã‚‰ã§ã™ã€‚setTimeout ã«ãã®è²¬ä»»ãŒã‚ã‚Šã¾ã™ã€‚**å¹¸ã„ã«ã‚‚ setTimeout ã‚’ãƒ—ãƒ­ãƒŸã‚¹ã®ä¸­ã«ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™**ã€‚è‰¯ã„ã‚„ã‚Šæ–¹ã¯ã€å•é¡Œã®ã‚ã‚‹é–¢æ•°ã‚’ã§ãã‚‹é™ã‚Šä½ã„æ°´æº–ã§ãƒ©ãƒƒãƒ—ã—ãŸä¸Šã§ã€ç›´æ¥å‘¼ã³å‡ºã•ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚
>(ä¸Šè¨˜ãƒšãƒ¼ã‚¸ã‚ˆã‚Šå¼•ç”¨)

éåŒæœŸ API ã¯ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ«ã§ã‚¿ã‚¹ã‚¯ã‚’ç™ºè¡Œã™ã‚‹ã‚ˆã‚Šã‚‚ã€Promise ã‚’è¿”ã—ã¦ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ã‚’ç™ºè¡Œã™ã‚‹ã‚‚ã®ã§ã‚ã‚‹ã“ã¨ãŒæœ›ã¾ã—ã„ã¨ã„ã†æ—¨ãŒèª­ã¿å–ã‚Œã¾ã™ã€‚ãã—ã¦ã€ã‚¿ã‚¹ã‚¯ã‚’ç™ºè¡Œã™ã‚‹ã‚¿ã‚¤ãƒ—ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¹ã‚¿ã‚¤ãƒ« API ã¯ Promise ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãªã©ã‚’ã‚ˆã‚Šã‚„ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚

# Promisification

ä¸Šã§è¿°ã¹ãŸã‚ˆã†ã« Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã‚ˆã£ã¦ã‚¿ã‚¹ã‚¯ãƒ™ãƒ¼ã‚¹ã®éåŒæœŸå‡¦ç†(ã¤ã¾ã‚Šå¤ã„ã‚¿ã‚¤ãƒ—ã®éåŒæœŸ API)ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹æ‰‹æ³•ã¯ "Promisifying" ã¾ãŸã¯ "Promisification" ã¨å‘¼ã°ã‚Œã¾ã™ã€‚

https://ja.javascript.info/promisify

ãŸã ã—ã€æ‰‹å‹•ã§ã‚„ã‚‹ã“ã¨ã¯æœ€è¿‘ã¯ã‚ã¾ã‚Šã‚„ã‚‰ãªã„ã‚‰ã—ã„ã§ã™ã€‚ã¨ã„ã†ã®ã‚‚å˜ç´”ã«éåŒæœŸ API è‡ªä½“ãŒ Promise-based ãªã‚‚ã®ãŒå‡ºã¦ãã¦ã„ã¾ã™ã€‚ã¾ãŸã€å¤ã„ã‚¿ã‚¤ãƒ—ã® API ã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ã®ã§ã‚‚ã€ä¾‹ãˆã° Node ç’°å¢ƒã§ã¯ `promisifying` é–¢æ•°ã¨ã„ã†ã®ãŒ util module ã«ã‚ã‚Šã€ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§æ‰‹å‹•ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ãªã Promisify ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

Deno ç’°å¢ƒãªã©ã§ã¯ã»ã¨ã‚“ã©ã™ã¹ã¦ã®éåŒæœŸ API ãŒ Promise ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã—ã€`setTimeout()` ã§ã•ãˆã‚‚ Promise ã§æ‰‹å‹•ãƒ©ãƒƒãƒ—ã™ã‚‹å¿…è¦ã‚‚å®Ÿã¯ãªãã€Promise ã‚’è¿”ã™ã‚¿ã‚¤ãƒãƒ¼ãŒ Standard library ã®ï¼‘ã¤ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

https://deno.land/std@0.137.0/async#delay

Node ç’°å¢ƒã§ã‚‚ Promise-based ãªéåŒæœŸ API ãŒè‰²ã€…æä¾›ã•ã‚Œã¦ãŠã‚Šã€Promise ã‚’è¿”ã™ã‚¿ã‚¤ãƒãƒ¼å‡¦ç†ã‚‚å­˜åœ¨ã—ã¦ã„ã¾ã™ã€‚

https://nodejs.org/dist/latest-v18.x/docs/api/timers.html#timers-promises-api

ã¨ã¯è¨€ã£ã¦ã‚‚å†…éƒ¨ã§ã€Promise ã§ãƒ©ãƒƒãƒ—ã—ã¦ã„ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã—ã€æ‰‹å‹•ã§ãƒ©ãƒƒãƒ—ã™ã‚‹æ–¹æ³•ã‚’å­¦ã‚“ã§ãŠã„ã¦æã¯ãªã„ã®ã§è§£èª¬ã—ã¾ã™ã€‚å˜ç´”ã« `new Promise()` ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã ã‘ã§ã™ã€‚

ãªã‚‹ã¹ãä½æ°´æº–ã§ãƒ©ãƒƒãƒ—ã—ã¦ç›´æ¥çš„ã«å‘¼ã³å‡ºã•ãªã„ã‚ˆã†ã«ã—ã¾ã™ã€‚

```js
const promiseTimer = (delay) => {
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve();
    }, delay);
})};

promiseTimer(1000)
  .then(() => console.log("Timeout"))
  .then(() => console.log("Next action"))
  .then(() => console.log("Next action"))
  .catch((err) => console.error(err.message));
```

ã“ã‚Œã§ã€ç‰¹å®šæ™‚é–“ãŒçµŒéã—ãŸã‚‰ä½•ã‹ã™ã‚‹ã€ãã‚ŒãŒå®Œäº†ã—ãŸã‚‰ã¾ãŸä½•ã‹ã™ã‚‹ã¨ã„ã†ã®ãŒã‚„ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚

Visualizer ã§å¯è¦–åŒ–ã—ãŸã®ã§ã€ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚

- [promiseTimer.js - JS Visualizer](https://www.jsv9000.app/?code=Y29uc3QgcHJvbWlzZVRpbWVyID0gKGRlbGF5KSA9PiB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7CiAgICBzZXRUaW1lb3V0KCgpID0%2BIHsKICAgICAgcmVzb2x2ZSgpOwogICAgfSwgZGVsYXkpOwp9KX07Cgpwcm9taXNlVGltZXIoMTAwMCkKICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygiVGltZW91dCIpKQogIC50aGVuKCgpID0%2BIGNvbnNvbGUubG9nKCJOZXh0IGFjdGlvbiIpKQogIC50aGVuKCgpID0%2BIGNvbnNvbGUubG9nKCJOZXh0IGFjdGlvbiIpKQogIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKSk7)
- âš ï¸ æ³¨æ„: JS Visuzlizer ã§ã¯ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¯å¯è¦–åŒ–ã•ã‚Œãªã„ã®ã§æœ€åˆã®ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ãƒ»ã‚¿ã‚¹ã‚¯å®Ÿè¡Œã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã¤ã„ã¦èª¤è§£ã—ãªã„ã‚ˆã†ã«æ³¨æ„ã—ã¦ãã ã•ã„

ã¯ã˜ã‚ã«ã‚¿ã‚¹ã‚¯ãŒç™ºè¡Œã•ã‚Œã¦ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã¸ã¨é€ã‚‰ã‚Œã¦ã„ã¾ã™ã­ã€‚ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã‹ã‚‰ã‚³ãƒ¼ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã¸ã¨é€ã‚‰ã‚Œã¦ã€`resolve()` ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚ãã‚Œã«ã‚ˆã£ã¦å¾…æ©ŸçŠ¶æ…‹ã® Promoise ãŒå±¥è¡ŒçŠ¶æ…‹ã«ãªã‚‹ãŸã‚ã€`.then()` ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ã‚­ãƒ¥ãƒ¼ã«ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ã¨ã—ã¦é€ã‚‰ã‚Œã¾ã™ã€‚ãã—ã¦ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ãŒã‚³ãƒ¼ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ã«ç©ã¾ã‚Œå®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã§æ›´ã«ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ãŒç™ºç”Ÿã—ã¦ã€ã™ã¹ã¦ã®ãƒã‚¤ã‚¯ãƒ­ã‚¿ã‚¹ã‚¯ãŒå‡¦ç†ã•ã‚Œã¦ã‚³ãƒ¼ãƒ«ã‚¹ã‚¿ãƒƒã‚¯ãŒç©ºã«ãªã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—ã¯çµ‚äº†ã—ã¾ã™ã€‚

:::message
ä¸Šã®æ›¸ãæ–¹ã¯å°‘ã—å†—é•·ãªã®ã§ã€ã‚¢ãƒ­ãƒ¼é–¢æ•°ã§ã® `return` ã‚’çœç•¥ã‚’ã—ã¦æ›¸ãã¨æ¬¡ã®æ§˜ã«ãªã‚Šã¾ã™ã€‚

```js
const promiseTimer = (delay)
  => new Promise((resolve) => setTimeout(resolve, delay));
```
:::

Promise ã§ãƒ©ãƒƒãƒ—ã—ã¦ä½¿ã‚ãªã„å ´åˆã«ã¯ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ã„ãã¤ã‚‚ãƒã‚¹ãƒˆã™ã‚‹å¿…è¦ãŒã§ã¦ãã‚‹ã®ã§ã€ã„ã‚ã‚†ã‚‹ **Callback Hell** ã«ãªã‚Šã¾ã™ã€‚

```js
const msg = "Timeout!";

setTimeout((value) => {
  console.log(value);
  setTimeout((value) => {
    console.log(value);
    setTimeout((value) => {
      console.log(value);
      setTimeout((value) => {
        console.log(value);
      }, 1000, value);
    }, 1000, value);
  }, 1000, value);
}, 1000, msg);
```

ã¾ãŸã€Promise ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€Async function ã«ã¦ `await` å¼ã‚’ä½¿ã£ã¦å®Œäº†ã‚’å¾…ã¦ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```js
// simplePromisify.js
const promiseTimer = (delay) => new Promise((resolve) => setTimeout(resolve, delay));

(async function doAsync() {
  await promiseTimer(1000);
  console.log("timeout!");
  await promiseTimer(1000);
  console.log("timeout!");
})();
// å³æ™‚å®Ÿè¡Œé–¢æ•°
```

